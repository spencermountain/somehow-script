{"version":3,"file":"somehow-script.js","sources":["../src/index.js"],"sourcesContent":["const isNumber = /^[+-]?[0-9]+([0-9,.%]+)?/\nconst hasComma = /,/\n\nconst special = {\n  true: true,\n  false: false,\n  yes: true,\n  no: false,\n  nope: false,\n  null: null,\n  none: null,\n  nil: null,\n  undefined: null\n}\n\nconst oneTemplate = function(str) {\n  let key = null\n  let val = null\n  str = str.trim()\n  str = str.replace(/^\\{/, '')\n  str = str.replace(/\\}$/, '')\n  let keyVal = str.match(/(.*?)[=:](.*)/)\n  if (keyVal) {\n    key = keyVal[1].trim()\n    val = keyVal[2].trim()\n  } else {\n    //implicit true\n    key = str\n    val = true\n  }\n  key = key.toLowerCase()\n  //cast values\n  if (typeof val === 'string' && special.hasOwnProperty(val.toLowerCase())) {\n    val = special[val.toLowerCase()]\n  } else if (isNumber.test(val)) {\n    val = parseFloat(val) || parseInt(val, 10) || val\n    val = val === '0' ? 0 : val\n  } else if (hasComma.test(val)) {\n    val = val.split(',').map(s => s.trim())\n  }\n  //support multi-keys\n  if (hasComma.test(key)) {\n  }\n\n  let result = {}\n  result[key] = val\n  return result\n}\n\nconst somehowScript = function(text) {\n  let templates = text.match(/\\{.*?\\}/g) || []\n  let errors = []\n  let data = {}\n  templates.forEach(str => {\n    let info = oneTemplate(str)\n    data = Object.assign(data, info)\n  })\n\n  return {\n    data: data,\n    errors: errors,\n    text: text\n  }\n}\nmodule.exports = somehowScript\n"],"names":["isNumber","hasComma","special","yes","no","nope","none","nil","undefined","oneTemplate","str","key","val","trim","replace","keyVal","match","toLowerCase","hasOwnProperty","test","parseFloat","parseInt","split","map","s","result","somehowScript","text","templates","errors","data","forEach","info","Object","assign"],"mappings":"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"}